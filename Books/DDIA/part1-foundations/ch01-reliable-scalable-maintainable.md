# Chapter 1: Reliable, Scalable, and Maintainable Applications

> 可靠、可扩展、可维护的应用程序

## 核心概念

### 1.1 数据密集型 vs 计算密集型

- **数据密集型 (Data-Intensive)**: 瓶颈在数据量、数据复杂度、数据变化速度
- **计算密集型 (Compute-Intensive)**: 瓶颈在 CPU 计算能力

### 1.2 三大关注点

| 关注点 | 英文 | 定义 |
|:-------|:-----|:-----|
| 可靠性 | Reliability | 系统在故障时仍能正确工作 |
| 可扩展性 | Scalability | 系统能应对负载增长 |
| 可维护性 | Maintainability | 系统易于运维和演进 |

## 可靠性 (Reliability)

### 故障类型

- **硬件故障**: 磁盘、内存、网络故障
- **软件故障**: Bug、资源耗尽、级联故障
- **人为故障**: 配置错误、操作失误

### 容错策略

```
故障 (Fault) ≠ 失效 (Failure)
目标：构建容错系统 (Fault-Tolerant System)
```

## 可扩展性 (Scalability)

### 描述负载

- **负载参数**: QPS、读写比例、并发用户数、缓存命中率
- **Twitter 案例**: 发推 vs 读时间线的权衡

### 描述性能

- **吞吐量 (Throughput)**: 单位时间处理的请求数
- **响应时间 (Response Time)**: 客户端视角的延迟
- **百分位数 (Percentile)**: p50, p95, p99, p999

### 应对负载

| 策略 | 说明 |
|:-----|:-----|
| 垂直扩展 (Scale Up) | 升级单机配置 |
| 水平扩展 (Scale Out) | 增加机器数量 |

## 可维护性 (Maintainability)

### 三个设计原则

| 原则 | 英文 | 目标 |
|:-----|:-----|:-----|
| 可运维性 | Operability | 运维团队能轻松管理 |
| 简单性 | Simplicity | 新人能快速理解系统 |
| 可演化性 | Evolvability | 易于修改和适应变化 |

## 要点总结

1. 应用程序的核心功能：存储、缓存、搜索、流处理、批处理
2. 可靠性通过冗余和容错实现
3. 可扩展性需要量化负载和性能指标
4. 可维护性影响系统的长期成本

## 思考题

- [ ] 你的系统是数据密集型还是计算密集型？
- [ ] 系统的主要故障来源是什么？
- [ ] 如何量化系统的负载和性能？

## 源码关联

| 概念 | 相关项目 | 实现 |
|:-----|:---------|:-----|
| 容错 | JuiceFS | 对象存储多副本、元数据引擎高可用 |
| 水平扩展 | JuiceFS | 客户端无状态、元数据分片 |
